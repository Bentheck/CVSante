@model IEnumerable<CVSante.Models.UserInfo>

@{
    ViewData["Title"] = "Search Citizens";
}

<h2>Search Citizens</h2>

<!-- Search Form -->
<form asp-action="SearchCitoyen" method="get">
    <div class="form-group">
        <label for="searchString">Search by Name or User ID:</label>
        <input type="text" class="form-control" id="searchString" name="searchString" value="@ViewBag.SearchString" placeholder="Enter name or user ID" />
    </div>
    <button type="submit" class="btn btn-primary">Search</button>
</form>

<!-- Display Message if No Results Found after Search -->
@if (ViewBag.Message != null)
{
    <div class="alert alert-warning mt-3">
        @ViewBag.Message
    </div>
}

<!-- Display Results Only If Search String Is Provided -->
@if (Model != null && Model.Any() && !string.IsNullOrWhiteSpace(ViewBag.SearchString))
{
    <table class="table table-striped table-bordered mt-3">
        <thead>
            <tr>
                <th>User ID</th>
                <th>First Name (Prenom)</th>
                <th>Last Name (Nom)</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var citoyen in Model)
            {
                <tr>
                    <td>@citoyen.FkUserId</td>
                    <td>@citoyen.Prenom</td>
                    <td>@citoyen.Nom</td>
                    <td>
                        <a class="btn btn-info" asp-action="ViewCitoyen" asp-route-id="@citoyen.FkUserId">View Details</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else if (Model != null && !Model.Any() && !string.IsNullOrWhiteSpace(ViewBag.SearchString))
{
    <p class="mt-3">No citizens found.</p>
}
